# <!-- Powered by BMADâ„¢ Core -->
template:
  id: release-plan-template-v1
  name: Release Plan Document
  version: 1.0
  output:
    format: markdown
    filename: docs/releases/{{release_version}}-release-plan.md
    title: "Release Plan: {{release_version}}"

workflow:
  mode: interactive
  elicitation: advanced-elicitation

agent_config:
  editable_sections:
    - release-overview
    - scope
    - changelog
    - release-notes
    - communications-plan
    - monitoring-plan
    - execution-log
    - post-release-monitoring

sections:
  - id: release-overview
    title: Release Overview
    type: structured
    instruction: Define the basic release information, goals, and stakeholders
    elicit: true
    owner: release-manager
    editors: [release-manager]
    subsections:
      - id: release-info
        title: Release Information
        type: key-value
        template: |
          - **Version Number:** {{release_version}}
          - **Release Type:** {{release_type}} *(Major / Minor / Patch / Hotfix)*
          - **Target Release Date:** {{target_release_date}}
          - **Deployment Window:** {{deployment_start_time}} - {{deployment_end_time}}
        instruction: Determine version number using versioning-strategies.md guidance
        elicit: true

      - id: release-goals
        title: Release Goals & Objectives
        type: text
        instruction: Define why this release is being done and what it aims to achieve
        elicit: true

      - id: stakeholders
        title: Stakeholders
        type: key-value
        template: |
          - **Release Manager:** {{release_manager}}
          - **Product Owner:** {{product_owner}}
          - **Engineering Lead:** {{engineering_lead}}
          - **QA Lead:** {{qa_lead}}
          - **DevOps Lead:** {{devops_lead}}
        instruction: Identify key people responsible for this release
        elicit: true

  - id: scope
    title: Scope
    type: structured
    instruction: Define what is and is not included in this release
    elicit: true
    owner: scope-analyzer
    editors: [release-manager, scope-analyzer]
    subsections:
      - id: features
        title: Features (Added)
        type: bullet-list
        template: |
          - **{{feature_name}}** - {{description}} *(Issue: #{{issue_number}})*
        instruction: List new features included, analyzed by Scope Analyzer
        elicit: true

      - id: bug-fixes
        title: Bug Fixes (Fixed)
        type: bullet-list
        template: |
          - **{{bugfix_name}}** - {{description}} *(Issue: #{{issue_number}})*
        instruction: List bug fixes included
        elicit: true

      - id: breaking-changes
        title: Breaking Changes
        type: bullet-list
        template: |
          - **{{breaking_change}}** - {{description}} *(Migration required)*
        instruction: List any breaking changes that require user action
        elicit: true

      - id: deferred-items
        title: What's NOT Included (Deferred)
        type: bullet-list
        template: |
          - **{{deferred_item}}** - Reason: {{deferral_reason}}
        instruction: List items that were considered but deferred to future release
        elicit: true

      - id: dependencies
        title: Dependencies
        type: key-value
        instruction: Identify internal, external, and third-party dependencies
        elicit: true

  - id: changelog
    title: Changelog (Technical)
    type: structured
    instruction: Generate technical changelog from git history using changelog-conventions.md
    owner: release-manager
    editors: [release-manager]
    subsections:
      - id: breaking-changes-detail
        title: Breaking Changes
        type: bullet-list
        instruction: Detailed breaking changes with migration paths

      - id: added
        title: Added (New Features)
        type: bullet-list
        instruction: New capabilities added, reference PRs

      - id: changed
        title: Changed (Modifications)
        type: bullet-list
        instruction: Modifications to existing functionality

      - id: deprecated
        title: Deprecated (To Be Removed)
        type: bullet-list
        instruction: Features marked for future removal

      - id: removed
        title: Removed
        type: bullet-list
        instruction: Features removed in this release

      - id: fixed
        title: Fixed (Bug Fixes)
        type: bullet-list
        instruction: Bug fixes with issue numbers

      - id: security
        title: Security
        type: bullet-list
        instruction: Security fixes with CVE IDs and severity

      - id: performance
        title: Performance
        type: bullet-list
        instruction: Performance improvements with metrics

  - id: release-notes
    title: Release Notes (User-Facing)
    type: structured
    instruction: Transform technical changelog into user-friendly release notes
    owner: communication-specialist
    editors: [communication-specialist, release-manager]
    subsections:
      - id: whats-new
        title: What's New
        type: text
        instruction: Highlight top features with user benefits, not technical details
        elicit: true

      - id: improvements
        title: Improvements
        type: bullet-list
        instruction: User-visible improvements and enhancements

      - id: bug-fixes-user
        title: Bug Fixes
        type: bullet-list
        instruction: Bug fixes in user-friendly language

      - id: breaking-changes-migration
        title: Breaking Changes & Migration Guide
        type: text
        instruction: Clear migration instructions for breaking changes
        elicit: true

      - id: known-issues
        title: Known Issues
        type: bullet-list
        instruction: Document any known issues with workarounds

  - id: communications-plan
    title: Communications Plan
    type: structured
    instruction: Internal and external communication strategy
    owner: communication-specialist
    editors: [communication-specialist]
    subsections:
      - id: internal-comms
        title: Internal Communications
        type: text
        instruction: Team notifications and briefings
        elicit: true

      - id: external-comms
        title: External Communications
        type: text
        instruction: User announcements, blog posts, social media
        elicit: true

      - id: support-briefing
        title: Support Team Briefing
        type: text
        instruction: Prepare support team with FAQs and escalation paths
        elicit: true

      - id: notification-timeline
        title: Notification Timeline
        type: table
        columns: [Time, Audience, Channel, Message]
        instruction: Schedule all communications

  - id: monitoring-plan
    title: Monitoring Plan
    type: structured
    instruction: Define metrics to track and alert thresholds
    owner: release-manager
    editors: [release-manager, deployment-coordinator]
    subsections:
      - id: key-metrics
        title: Key Metrics to Track
        type: key-value
        template: |
          **Error Rates:**
          - 5xx Error Rate: Baseline {{baseline}}%, Alert > {{threshold}}%

          **Performance Metrics:**
          - Response Time (p95): Baseline {{baseline}}ms, Alert > {{threshold}}ms

          **Business Metrics:**
          - Conversion Rate: Baseline {{baseline}}%, Alert < {{threshold}}%
        instruction: Define baseline and alert thresholds for each metric
        elicit: true

      - id: alert-config
        title: Alert Configuration
        type: text
        instruction: Configure critical, high, and medium priority alerts

      - id: monitoring-duration
        title: Monitoring Duration
        type: text
        template: |
          **Intensive Monitoring (First 4 hours):** Hourly reviews
          **Extended Monitoring (4-24 hours):** Every 4 hours
          **Normal Monitoring (24+ hours):** Standard monitoring
        instruction: Define monitoring schedule post-deployment

      - id: success-criteria
        title: Success Criteria
        type: checklist
        template: |
          - [ ] Error rates within 10% of baseline
          - [ ] Performance metrics within 10% of baseline
          - [ ] No critical incidents
          - [ ] Business metrics stable or improved
          - [ ] No rollback triggered
        instruction: Define what success looks like after 24 hours

  - id: execution-log
    title: Execution Log
    type: structured
    instruction: Real-time deployment execution tracking (filled during deployment)
    owner: deployment-coordinator
    editors: [deployment-coordinator, release-manager]
    subsections:
      - id: deployment-timeline
        title: Deployment Timeline
        type: key-value
        template: |
          - Deployment Start: {{actual_start_time}}
          - Deployment End: {{actual_end_time}}
          - Total Duration: {{total_duration}}
        instruction: Record actual deployment times

      - id: phase-execution
        title: Phase Execution
        type: text
        instruction: Log each phase with start/end times, status, notes

      - id: issues-encountered
        title: Issues Encountered
        type: bullet-list
        instruction: Document any issues, their impact, and resolution

      - id: deviations
        title: Deviations from Plan
        type: bullet-list
        instruction: Note any deviations from planned procedure with reasons

      - id: rollback-status
        title: Rollback Status
        type: choice
        choices: [No-Rollback, Rollback-Triggered]
        instruction: Record if rollback was triggered and details

  - id: post-release-monitoring
    title: Post-Release Monitoring
    type: structured
    instruction: Track metrics over 24-48 hours post-deployment
    owner: release-manager
    editors: [release-manager]
    subsections:
      - id: intensive-monitoring
        title: Hour 1-4 (Intensive Monitoring)
        type: table
        columns: [Hour, Error-Rate, Response-Time-p95, Status, Issues]
        instruction: Record metrics every hour for first 4 hours

      - id: health-report-24h
        title: 24-Hour Health Report
        type: table
        columns: [Metric, Baseline, Current, Change, Status]
        instruction: Compare all key metrics to baseline

      - id: health-report-48h
        title: 48-Hour Status
        type: text
        instruction: Final assessment of release stability

      - id: recommendation
        title: Recommendation
        type: choice
        choices: [Continue-Monitoring, Hotfix-Required, Rollback-Recommended, Stable]
        instruction: Final recommendation after monitoring period

metadata:
  references:
    knowledge-base:
      - release-management-kb.md
      - versioning-strategies.md
      - changelog-conventions.md
      - deployment-patterns.md
    checklists:
      - pre-release-checklist.md
      - deployment-checklist.md
      - post-deployment-checklist.md
      - rollback-checklist.md
    workflows:
      - standard-release.yaml
      - hotfix-release.yaml
      - major-release.yaml

workflow_guidance:
  planning_phase:
    - Start with release-overview to understand the "why" and "what"
    - Work through scope with Scope Analyzer for inclusion/deferral decisions
    - Determine version number using versioning-strategies.md
    - Generate changelog from git history using changelog-conventions.md
    - Transform technical changelog into user-friendly release notes

  quality_deployment:
    - Run through pre-release-checklist.md for quality assessment
    - Create deployment plan based on deployment-patterns.md
    - Select appropriate deployment strategy
    - Plan database migrations using Expand-Contract pattern
    - Create comprehensive rollback plan

  communication:
    - Draft internal and external communications
    - Prepare support team with FAQs
    - Create monitoring plan with specific thresholds

  execution:
    - Update execution-log in real-time during deployment
    - Track issues and deviations as they occur
    - Document resolution steps

  post_release:
    - Update post-release-monitoring with actual metrics
    - After 24-48 hours, facilitate retrospective
    - Capture lessons learned and create action items
    - Track improvements for next release

interactive_guidance:
  principles:
    - Be thorough but pragmatic - not every field needs filling
    - Focus on risks and mitigation - make rollback plan concrete
    - Keep user-facing communications simple and benefit-focused
    - Technical changelog can be detailed, release notes should be concise
    - Emphasize continuous improvement through retrospectives
    - Reference knowledge base files when user needs guidance
    - Use checklists to ensure nothing is missed
    - Adapt detail level based on release type (hotfix vs major)

  agent_behaviors:
    - Ask clarifying questions when scope is unclear
    - Suggest best practices from deployment-patterns.md
    - Help assess risks objectively
    - Encourage transparency about known issues
    - Remind to involve stakeholders at key decision points

  document_evolution:
    - This document starts sparse and fills in over time
    - Some sections (execution-log, post-release-monitoring, retrospective) are filled AFTER deployment
    - Encourage continuous updates, not just at start/end
    - This becomes the single source of truth for the release
